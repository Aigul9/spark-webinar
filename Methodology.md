# ТЗ на витрину marketing_datamart

Необходимо вывести в рамках витрины 3 таблицы:
- customer_detailed
- campaigns_agg
- dates_agg

## Атрибутивный состав

### Таблица customer_detailed

| №  | Название столбца | Тип данных    | Описание                                                   |
|----|------------------|---------------|------------------------------------------------------------|
| 1  | dt               | string        | Дата визита                                                |
| 2  | visit_id         | string        | Идентификатор визита                                       |
| 3  | client_id        | string        | Идентификатор клиента                                      |
| 4  | url              | string        | URL страницы                                               |
| 5  | duration         | int           | Время на сайте в секундах                                  |
| 6  | source           | string        | Тип источника, с которого ползователь пришел на сайт       |
| 7  | utmcampaign      | string        | Название рекламной кампании                                |
| 8  | event_type       | string        | Тип события                                                |
| 9  | event_id         | bigint        | Идентификатор события                                      |
| 10 | submit_id        | bigint        | Идентификатор заявки                                       |
| 11 | name             | string        | Имя клиента                                                |
| 12 | phone            | string        | Мобильный телефон                                          |
| 13 | phone_plus       | string        | Мобильный телефон со знаком +                              |
| 14 | phone_md5        | string        | Мобильный телефон, хешированный алгоритмом md5             |
| 15 | phone_plus_md5   | string        | Мобильный телефон со знаком +, хешированный алгоритмом md5 |
| 16 | deal_id          | bigint        | Идентификатор сделки                                       |
| 17 | deal_date        | string        | Дата сделки                                                |
| 18 | fio              | string        | ФИО клиента                                                |
| 19 | phone_deal       | string        | Мобильный телефон из таблицы со сделками                   |
| 20 | email            | string        | Электронная почта                                          |
| 21 | address          | string        | Адрес места жительства                                     |
| 22 | campaign_id      | int           | Идентификатор рекламной кампании                           |
| 23 | campaign_name    | string        | Название рекламной кампании                                |
| 24 | costs            | decimal(19,2) | Расходы на рекламу                                         |
| 25 | clicks           | bigint        | Количество кликов                                          |
| 26 | views            | bigint        | Количество просмотров                                      |

### Таблица campaigns_agg

| №  | Название столбца | Тип данных    | Описание                                   |
|----|------------------|---------------|--------------------------------------------|
| 1  | campaign_name    | string        | Название рекламной кампании                |
| 2  | unique_visits    | bigint        | Количество визитов                         |
| 3  | unique_clients   | bigint        | Количество уникальных клиентов             |
| 4  | unique_submits   | bigint        | Количество заявок                          |
| 5  | unique_deals     | bigint        | Количество сделок                          |
| 6  | total_costs      | decimal(19,2) | Общая сумма расходов на рекламу            |
| 7  | total_clicks     | bigint        | Общая сумма кликов                         |
| 8  | total_views      | bigint        | Общая сумма просмотров                     |
| 9  | total_duration   | bigint        | Общая продолжительность визитов в секундах |
| 10 | avg_deal_cost    | decimal(19,2) | Средняя сумма сделки                       |

### Таблица dates_agg

| №  | Название столбца | Тип данных    | Описание                                   |
|----|------------------|---------------|--------------------------------------------|
| 1  | date             | string        | Дата по расходам                           |
| 2  | unique_visits    | bigint        | Количество визитов                         |
| 3  | unique_clients   | bigint        | Количество уникальных клиентов             |
| 4  | unique_submits   | bigint        | Количество заявок                          |
| 5  | unique_deals     | bigint        | Количество сделок                          |
| 6  | total_costs      | decimal(19,2) | Общая сумма расходов на рекламу            |
| 7  | total_clicks     | bigint        | Общая сумма кликов                         |
| 8  | total_views      | bigint        | Общая сумма просмотров                     |
| 9  | total_duration   | bigint        | Общая продолжительность визитов в секундах |
| 10 | avg_deal_cost    | decimal(19,2) | Средняя сумма сделки                       |


## Источники
